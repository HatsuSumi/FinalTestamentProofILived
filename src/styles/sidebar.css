/* 赞助支持侧边栏 */
#support-sidebar {
  position: fixed;
  top: 50%;
  right: 0;
  transform: translateY(-50%) translateX(100%);
  width: 200px;
  background: var(--sidebar-bg);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-radius: var(--radius-lg) 0 0 var(--radius-lg);
  padding: var(--spacing-xl) var(--spacing-lg);
  z-index: var(--z-fixed);
  transition: transform var(--transition-base);
  border: 2px solid transparent;
  border-right: none;
  background-image: var(--sidebar-border);
  background-origin: border-box;
  background-clip: padding-box, border-box;
  box-shadow: -5px 0 20px rgba(0, 0, 0, 0.3);
}

#support-sidebar.visible {
  transform: translateY(-50%) translateX(0);
  transition-delay: var(--transition-base);
}

/* 侧边栏背景刻度尺 */
.sidebar-ruler {
  position: absolute;
  top: -150vh; /* 足够长以覆盖屏幕 */
  bottom: -150vh;
  right: 10px; /* 位于侧边栏内部右侧，或者外部？放内部吧 */
  width: 10px;
  background: 
    /* 纵向主轴线 */
    linear-gradient(to bottom, rgba(0, 212, 255, 0.2) 0%, rgba(0, 212, 255, 0.2) 100%) left top / 1px 100% no-repeat,
    /* 小刻度 */
    repeating-linear-gradient(
      to bottom,
      rgba(0, 212, 255, 0.3),
      rgba(0, 212, 255, 0.3) 1px,
      transparent 1px,
      transparent 10px
    );
  opacity: 0.4;
  pointer-events: none;
  z-index: 0;
  animation: rulerScroll 60s linear infinite;
}

/* 大刻度装饰 */
.sidebar-ruler::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: repeating-linear-gradient(
    to bottom,
    rgba(255, 107, 157, 0.4),
    rgba(255, 107, 157, 0.4) 2px,
    transparent 2px,
    transparent 100px
  );
}

@keyframes rulerScroll {
  0% { transform: translateY(0); }
  100% { transform: translateY(100px); }
}

/* 标题 */
.sidebar-title {
  font-size: var(--text-lg);
  font-weight: 600;
  color: var(--white);
  text-align: center;
  margin-bottom: var(--spacing-md);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-xs);
  position: relative;
  z-index: 2;
}

.sidebar-icon {
  font-size: var(--text-2xl);
  animation: heartbeat 1.5s ease infinite;
}

@keyframes heartbeat {
  0%, 100% { transform: scale(1); }
  10% { transform: scale(1.1); }
  20% { transform: scale(1); }
  30% { transform: scale(1.1); }
  40% { transform: scale(1); }
}

/* 二维码容器 */
.qrcode-container {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  position: relative;
  z-index: 2;
}

.qrcode-item {
  position: relative;
  border-radius: var(--radius-md);
  overflow: hidden;
  transition: transform var(--transition-base);
}

.qrcode-item:hover {
  transform: scale(1.05);
}

.qrcode-label {
  font-size: var(--text-sm);
  color: var(--white);
  text-align: center;
  margin-bottom: var(--spacing-xs);
  font-weight: 500;
}

.qrcode-image {
  width: 100%;
  height: auto;
  border-radius: var(--radius-sm);
  border: 2px solid rgba(255, 255, 255, 0.2);
  transition: all var(--transition-base);
  background: var(--white);
  padding: 8px;
}

.qrcode-item:hover .qrcode-image {
  border-color: rgba(255, 215, 0, 0.8);
  box-shadow: var(--shadow-glow-gold);
}

/* 玻璃态效果增强 */
#support-sidebar::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    135deg,
    rgba(255, 215, 0, 0.1) 0%,
    rgba(255, 107, 107, 0.1) 50%,
    rgba(78, 205, 196, 0.1) 100%
  );
  z-index: 0;
  opacity: 0.5;
  animation: gradientShift 5s ease infinite;
  border-radius: var(--radius-lg) 0 0 var(--radius-lg);
}

@keyframes gradientShift {
  0%, 100% {
    opacity: 0.5;
  }
  50% {
    opacity: 0.8;
  }
}

/* =========================================
   赛博朋克 HUD 装饰区域
   ========================================= */

/* 顶部 HUD */
.sidebar-hud-top {
  position: absolute;
  bottom: 100%; /* 位于侧边栏上方 */
  left: 0;
  width: 100%;
  padding-bottom: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  pointer-events: none; /* 不阻挡点击背景 */
}

/* 雷达扫描 */
.hud-radar {
  position: relative;
  width: 50px;
  height: 50px;
  margin-bottom: 10px;
}

.radar-circle {
  position: absolute;
  width: 100%;
  height: 100%;
  border: 2px solid rgba(0, 212, 255, 0.3);
  border-radius: 50%;
  box-shadow: 0 0 10px rgba(0, 212, 255, 0.2);
}

.radar-circle::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 70%;
  height: 70%;
  border: 1px solid rgba(0, 212, 255, 0.2);
  border-radius: 50%;
}

.radar-sweep {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 50%;
  height: 2px;
  background: linear-gradient(to right, rgba(0, 212, 255, 0), rgba(0, 212, 255, 0.8));
  transform-origin: left center;
  animation: radarSweep 3s linear infinite;
}

@keyframes radarSweep {
  0% { transform: translate(0, -50%) rotate(0deg); }
  100% { transform: translate(0, -50%) rotate(360deg); }
}

.radar-dot {
  position: absolute;
  top: 30%;
  right: 20%;
  width: 4px;
  height: 4px;
  background: rgba(0, 212, 255, 0.8);
  border-radius: 50%;
  box-shadow: 0 0 8px rgba(0, 212, 255, 0.8);
  animation: radarPing 2s ease-in-out infinite;
}

@keyframes radarPing {
  0%, 100% { opacity: 0; transform: scale(0.5); }
  50% { opacity: 1; transform: scale(1.2); }
}

/* 连接线 */
.sidebar-hud-top::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  width: 2px;
  height: 20px;
  background: rgba(0, 212, 255, 0.3);
  box-shadow: 0 0 5px rgba(0, 212, 255, 0.5);
}

.hud-status {
  font-family: 'Courier New', monospace;
  font-size: 10px;
  color: var(--code-primary);
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 8px;
  text-shadow: 0 0 5px var(--code-primary);
  letter-spacing: 1px;
}

.status-dot {
  width: 6px;
  height: 6px;
  background: var(--code-primary);
  border-radius: 50%;
  box-shadow: 0 0 5px var(--code-primary);
  animation: statusBlink 2s infinite;
}

@keyframes statusBlink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.3; }
}

.hud-hex-stream {
  font-family: 'Courier New', monospace;
  font-size: 10px;
  color: rgba(255, 255, 255, 0.3);
  line-height: 1.4;
  text-align: right;
  width: 100%;
  padding-right: 10px;
  border-right: 2px solid rgba(0, 212, 255, 0.2);
}

/* 底部 HUD */
.sidebar-hud-bottom {
  position: absolute;
  top: 100%; /* 位于侧边栏下方 */
  left: 0;
  width: 100%;
  padding-top: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  pointer-events: none;
}

/* 散热风扇 */
.hud-fan {
  position: relative;
  width: 40px;
  height: 40px;
  margin-bottom: 10px;
}

.fan-blade {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 80%;
  height: 4px;
  background: linear-gradient(to right, transparent, rgba(255, 107, 157, 0.6), transparent);
  transform-origin: center;
  animation: fanRotate 2s linear infinite;
}

.fan-blade:nth-child(2) {
  transform: rotate(60deg);
}

.fan-blade:nth-child(3) {
  transform: rotate(120deg);
}

@keyframes fanRotate {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  100% { transform: translate(-50%, -50%) rotate(360deg); }
}

.fan-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 8px;
  height: 8px;
  background: rgba(255, 107, 157, 0.8);
  border-radius: 50%;
  box-shadow: 0 0 10px rgba(255, 107, 157, 0.5);
}

/* 连接线 */
.sidebar-hud-bottom::before {
  content: '';
  position: absolute;
  top: 0;
  left: 50%;
  width: 2px;
  height: 20px;
  background: rgba(255, 107, 157, 0.3);
  box-shadow: 0 0 5px rgba(255, 107, 157, 0.5);
}

.hud-graph {
  display: flex;
  gap: 4px;
  align-items: flex-end;
  height: 30px;
  margin-bottom: 8px;
}

.graph-bar {
  width: 6px;
  height: var(--h);
  background: rgba(255, 107, 157, 0.5);
  border: 1px solid rgba(255, 107, 157, 0.8);
  box-shadow: 0 0 5px rgba(255, 107, 157, 0.3);
  animation: barJump 1s ease-in-out infinite alternate;
}

/* 让柱状图跳动得随机一点 */
.graph-bar:nth-child(1) { animation-duration: 0.8s; }
.graph-bar:nth-child(2) { animation-duration: 1.2s; }
.graph-bar:nth-child(3) { animation-duration: 0.6s; }
.graph-bar:nth-child(4) { animation-duration: 1.0s; }
.graph-bar:nth-child(5) { animation-duration: 0.9s; }

@keyframes barJump {
  0% { height: 20%; opacity: 0.5; }
  100% { height: 90%; opacity: 1; }
}

.hud-label {
  font-family: 'Courier New', monospace;
  font-size: 10px;
  color: var(--art-primary);
  text-shadow: 0 0 5px var(--art-primary);
  letter-spacing: 1px;
}

/* 响应式 */
@media (max-width: 1366px) {
  /* 平板端及以下：完全隐藏右侧悬浮侧边栏 */
  #support-sidebar {
    display: none;
  }
}

@media (max-width: 768px) {
  /* 移动端不显示侧边栏 */
  #support-sidebar {
    display: none;
  }
  
  /* 覆盖平板端的显示规则 */
  body.view-main #support-sidebar,
  body.view-intro #support-sidebar,
  body.view-about #support-sidebar,
  body.view-reality #support-sidebar,
  body.view-testament #support-sidebar {
    display: none;
  }
}
